
#
#  Determine your Fortran compiler and some of its flags:

F90 = ifort

F90FLAGS = -O3 -I./
F90LINKFLAGS = -O3 -I./


.SUFFIXES:

%.o : %.mod

%.o: %.f90
	$(F90) $(F90FLAGS) -o $@ -c $<

%: %.o
	$(F90) $(F90LINKFLAGS) -o $@ $^

%.exe: %.o
	$(F90) $(F90LINKFLAGS) $(OBJS) -o $@ $^

#
# Seeking for and picking up files from directories:
#
vpath %.f90 /

OBJS = fmsave.o fm.o  fmzm90.o \

all: $(OBJS)
	mv *.o ../obj/
	mv *.mod ../mod/

.PHONY: clean run 

clean: 
	# remove all files generated by the compiler and by the .exe files
	rm -f *.o *.mod *.out *.OUT *.INP *.ARGS *.VARS *.MODS *.PASS1 *.PASS2 *.VARS2 \
	INTERVAL_EXAMPLES* TEMPFM RWtest 
	# remove all executable files
	rm -f $(executables)

run: $(executables)
	for f in $(executables); do \
	echo "**************************************************"; \
	echo; echo "RUNNING $$f ..." ; \
	./$$f ; \
	echo "**************************************************"; \
	done 

